Zotonic installation
======================

You will need:

1. Install Erlang R12B (13B has not been tested yet).
2. Install ImageMagick 'convert' and 'identify' tools (also install libjpeg, -tiff, -png and other required libraries).
   Make sure that the convert and identify tools are in your path so that zotonic can find them.
3. Install PostgreSQL (preferably 8.3 or newer).
4. A copy of the Zotonic source code.


Steps:

1. Type "make" in the root of zotonic (there where the Makefile is located). (*1)
	

2. Create an user and database in PostgreSQL:

    CREATE USER zotonic WITH PASSWORD 'yourdbpassword';
    CREATE DATABASE zotonic WITH OWNER = zotonic ENCODING = 'UTF8';
    GRANT ALL ON DATABASE zotonic TO zotonic;
    \c zotonic
    CREATE LANGUAGE "plpgsql";

3. Copy the file "doc/zotonic.sh" to a place that is handy for you.

4. Edit the "zotonic.sh" script, edit and uncomment at least the following keys:

   The place of zotonic and the zotonic.sh script:

    BASE
    ME

   Passwords and secret signing keys:
	
    ZOTONIC_DBPASSWORD
    ZOTONIC_ADMINPASSWORD
    ZOTONIC_SIGN_KEY_SIMPLE
    ZOTONIC_SIGN_KEY

5. Make sure that the directory "priv/sites/default/files" and all its subdirectories are readable 
   and writeable for the current user. (Which is the user zotonic will run under.)

6. Start zotonic in debug mode:

    zotonic.sh debug

7. You see zotonic starting up, lots of messages pass by, and zotonic will install the initial database.
   When something goes wrong here, then it is almost always a problem with the database connection. Check your 
   database configuration in the zotonic.sh file.

8. Point your browser to 
	
    http://127.0.0.1:8000/
	
   or logon as admin (with the password you gave at ZOTONIC_ADMINPASSWORD) at: 

    http://127.0.0.1:8000/admin/

9. When all done, then you can stop the erlang shell with:

    q().
  
   Next time you can start with:

    zotonic.sh start



Operating system specific notes:
-------------------------------

FreeBSD:

If you're running on FreeBSD, make sure you've got the 'GNU' 'make'
(check with 'make --version', which should give you GNU, and version
info) If you're not running GNU-make as a default, edit the Makefile
to run with 'gmake' (make sure gmake is available first))



Ubuntu:

Instead of compiling erlang, you can install the following erlang packages:

erlang-base
erlang-crypto
erlang-dev
erlang-docbuilder
erlang-edoc
erlang-et
erlang-eunit
erlang-gs
erlang-inets
erlang-mnesia
erlang-mode
erlang-observer
erlang-odbc
erlang-parsetools
erlang-public-key
erlang-runtime-tools
erlang-ssl
erlang-syntax-tools
erlang-tools
erlang-webtool
erlang-xmerl
